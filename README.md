# Yande.re图片爬虫

## 前言

手动刷图费时费力，至少我是这么想的。于是就有了这个项目~~及后续更新~~。

本项目基于`Win7, Python3.5.2`与`Win10, Python3.6.7`开发，在`Ubuntu16.04, Python3.5.2`运行成功，其他环境未考虑。

## 功能

- 支持从指定的**开始页码**爬取到**结束页码**
- 也支持从**第一页**爬取到**上一次开始爬取的位置**
- 支持设置爬取的**图片类型**（全部、横图、竖图、正方形）
- 支持最大或最小**图片尺寸**、**宽高比**限制
- 支持限制爬取的**图片体积**
- 按照当天的日期创建目录并存放爬取的图片
- 爬取结束后会在图片目录下生成日志文件
- 支持**tag搜索与排除**
- (可选)**GUI**

## 如何使用

### 可选

编辑`config.json`中的`folder_path`参数，设为自己想要的目录，如文件夹不存在将会自动创建。

剩下的参数可以运行后根据提示修改。

Windows下命令行执行`python index.py`或`python GUI.py`均可，Linux下可直接执行。

## 配置文件参数

- 未在下面列出的参数均可通过命令行/图形界面更改或通常无需使用。
- `tags`与`dicard_tags`只能通过编辑文件修改，且仅当`task_mode`为真时被读取。用于使用tag搜索的定时任务。
- `task_mode`为真时按照配置文件内各项设置进入下载流程，跳过输入设置部分。为定时任务准备的特定选项，使用GUI时不触发。
- `pic_size`分`min`与`max`两部分：前者为下限，后者为上限；`width, height, proportion`分别对应图片宽、高、宽高比，某项取值为零时不对该项做出限制。任一条件满足则跳过。
- `file_size_limit`为真时将待下载图片体积与`file_size`对比，超出数值限制则跳过。单位为字节。
- `date_separate`是否按当天日期创建子文件夹。使用tag搜索时不生效。
- `safe_mode`过滤`explict`分级内容。~~真的会有人用吗~~
- `status_check`：由于各种原因 ~~(绝大部分是low-res)~~，部分贴图会进入“待审核”状态。此项为真时跳过此类图片。

## 注意事项

- 每次运行后`config.json`中`last_stop_id`参数会被自动修改为爬取到的第一张图片的ID，便于下一次爬取时只爬取新post，无论停止条件为ID或是页码。
- `folder_path`参数只接受以`/`为分隔符的路径。~~但也接受`\\`分隔符或在有`r`前缀的字符串中使用`\`分隔符~~
- 使用tag搜索时会在设定目录下以搜索tags字符串为名建立文件夹，不会按日期创建。

## 更新日志

### 2.1

解决tags发生变化后文件重复下载的问题并作出一些改进

### 2.0

新增：tag搜索，图形界面~~与并行下载~~

### 1.0

终于完成了啦
